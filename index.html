<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Reddit karma</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

</head>
<body>
<div id="leaderboard">

</div>
    <script>
        var leaderboard = document.getElementById("leaderboard");
        var commentKarma;
        var postKarma;
        var userName;
        var userIcon;
        var userUrl;

        users = ["Sloth_on_meth", "filiptronicek", "cigarkovic", "gallowboob", "TooShiftyForYou"]

        function updateStats() {
            leaderboard.innerHTML = "";

        users.forEach(mainfunc)
        }
updateStats();     
     
        function mainfunc(user) {
 $.getJSON( "https://www.reddit.com/user/"+user+"/about.json", function(data) {
    commentKarma = data.data.comment_karma;
    postKarma = data.data.link_karma;
    totalKarma = commentKarma + postKarma;
    userName = data.data.name;
    userIcon = data.data.icon_img;
    userUrl = "https://reddit.com/u/"+ userName;
    leaderboard.innerHTML += "<div class='usr' id='"+userName+"'><br><br><img src='"+userIcon+ "'><br><a href='"+userUrl+"'>"+userName +"</a><br>"+totalKarma.toLocaleString()+" karma";



//setTimeout(function(){ updateStats(); }, 10000);

}).done(function() {    
   return;
})
.fail(function() {
  console.log( "error" );
})
.always(function() {
   console.log( "complete" );
})

        }
        </script>
</body>
</html>
